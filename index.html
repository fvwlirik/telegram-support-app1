<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FvW_AI Assistant</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjs@11.8.0/lib/browser/math.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/plotly.js-dist@2.24.1/plotly.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üî∑ FvW_AI</h1>
        </header>

        <div id="main-menu" class="section">
            <div class="main-menu">
                <button onclick="showSection('math')">üßÆ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</button>
                <button onclick="showSection('currency')">üí± –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç</button>
                <button onclick="showSection('notes')">üìù –ó–∞–º–µ—Ç–∫–∏</button>
                <button onclick="showSection('timer')">‚è∞ –¢–∞–π–º–µ—Ä</button>
                <button onclick="showSection('chat')">üí¨ –ß–∞—Ç —Å –ò–ò</button>
            </div>
        </div>

        <!-- –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–¥–µ–ª -->
        <div id="math-section" class="section hidden">
            <div class="section-header">
                <button class="back-button" onclick="showMainMenu()">‚óÄ –ù–∞–∑–∞–¥</button>
                <h2>üßÆ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</h2>
            </div>
            
            <div class="math-tabs">
                <button class="tab-btn active" onclick="switchMathTab('calculator')">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</button>
                <button class="tab-btn" onclick="switchMathTab('equation')">–£—Ä–∞–≤–Ω–µ–Ω–∏—è</button>
                <button class="tab-btn" onclick="switchMathTab('graph')">–ì—Ä–∞—Ñ–∏–∫–∏</button>
                <button class="tab-btn" onclick="switchMathTab('ai-solver')">AI –†–µ—à–µ–Ω–∏–µ</button>
            </div>

            <!-- –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä -->
            <div id="calculator-tab" class="math-tab-content">
                <input type="text" id="calc-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ" readonly>
                <button onclick="calculate()" class="calculate-btn">=</button>
                
                <div class="calculator-grid">
                    <div class="calc-row">
                        <button onclick="addToCalc('7')">7</button>
                        <button onclick="addToCalc('8')">8</button>
                        <button onclick="addToCalc('9')">9</button>
                        <button onclick="addToCalc('/')">/</button>
                        <button onclick="addToCalc('‚àö(')">‚àö</button>
                    </div>
                    <div class="calc-row">
                        <button onclick="addToCalc('4')">4</button>
                        <button onclick="addToCalc('5')">5</button>
                        <button onclick="addToCalc('6')">6</button>
                        <button onclick="addToCalc('*')">√ó</button>
                        <button onclick="addToCalc('^')">^</button>
                    </div>
                    <div class="calc-row">
                        <button onclick="addToCalc('1')">1</button>
                        <button onclick="addToCalc('2')">2</button>
                        <button onclick="addToCalc('3')">3</button>
                        <button onclick="addToCalc('-')">-</button>
                        <button onclick="addToCalc('(')">(</button>
                    </div>
                    <div class="calc-row">
                        <button onclick="addToCalc('0')">0</button>
                        <button onclick="addToCalc('.')">.</button>
                        <button onclick="clearCalc()">C</button>
                        <button onclick="addToCalc('+')">+</button>
                        <button onclick="addToCalc(')')">)</button>
                    </div>
                </div>
                <div id="calc-result" class="result"></div>
            </div>

            <!-- –£—Ä–∞–≤–Ω–µ–Ω–∏—è -->
            <div id="equation-tab" class="math-tab-content hidden">
                <div class="math-symbols-grid">
                    <button onclick="addMathSymbol('x')">x</button>
                    <button onclick="addMathSymbol('y')">y</button>
                    <button onclick="addMathSymbol('x¬≤')">x¬≤</button>
                    <button onclick="addMathSymbol('x¬≥')">x¬≥</button>
                    <button onclick="addMathSymbol('‚àö(')">‚àö</button>
                    <button onclick="addMathSymbol('œÄ')">œÄ</button>
                    <button onclick="addFraction()">a/b</button>
                </div>
                
                <input type="text" id="equation-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: x^2 - 4 = 0)">
                
                <div class="math-functions">
                    <button onclick="addMathFunction('sin(')">sin</button>
                    <button onclick="addMathFunction('cos(')">cos</button>
                    <button onclick="addMathFunction('tan(')">tan</button>
                    <button onclick="addMathFunction('log(')">log</button>
                    <button onclick="addMathFunction('exp(')">exp</button>
                </div>
                
                <button onclick="solveEquation()" class="solve-btn">üßÆ –†–µ—à–∏—Ç—å —É—Ä–∞–≤–Ω–µ–Ω–∏–µ</button>
                <div id="equation-steps" class="result"></div>
                <div id="equation-result" class="result"></div>
            </div>

            <!-- –ì—Ä–∞—Ñ–∏–∫–∏ -->
            <div id="graph-tab" class="math-tab-content hidden">
                <input type="text" id="function-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä: sin(x))">
                <button onclick="plotFunction()" class="plot-btn">üìà –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫</button>
                <div id="graph-container" style="width:100%; height:350px;"></div>
            </div>

            <!-- AI –†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á -->
            <div id="ai-solver-tab" class="math-tab-content hidden">
                <textarea id="math-problem-input" placeholder="–û–ø–∏—à–∏—Ç–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–¥–∞—á—É... 
–ù–∞–ø—Ä–∏–º–µ—Ä: '–ù–∞–π–¥–∏—Ç–µ –∫–æ—Ä–Ω–∏ —É—Ä–∞–≤–Ω–µ–Ω–∏—è x^2 - 5x + 6 = 0' 
–∏–ª–∏ '–í—ã—á–∏—Å–ª–∏—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª –æ—Ç 0 –¥–æ 1 —Ñ—É–Ω–∫—Ü–∏–∏ x^2 dx'"></textarea>
                <button onclick="solveWithAI()" class="ai-solve-btn">ü§ñ –†–µ—à–∏—Ç—å —Å –ø–æ–º–æ—â—å—é AI</button>
                <div id="ai-solution-result" class="result"></div>
            </div>
        </div>

        <!-- –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç -->
        <div id="currency-section" class="section hidden">
            <div class="section-header">
                <button class="back-button" onclick="showMainMenu()">‚óÄ –ù–∞–∑–∞–¥</button>
                <h2>üí± –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç</h2>
            </div>

            <div class="currency-tabs">
                <button class="tab-btn active" onclick="switchCurrencyTab('rates')">–ö—É—Ä—Å—ã</button>
                <button class="tab-btn" onclick="switchCurrencyTab('converter')">–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä</button>
            </div>

            <!-- –ö—É—Ä—Å—ã -->
            <div id="rates-tab" class="currency-tab-content">
                <div class="currency-controls">
                    <button onclick="getCBRrates()" class="refresh-btn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
                <div id="currency-result" class="result"></div>
            </div>

            <!-- –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä -->
            <div id="converter-tab" class="currency-tab-content hidden">
                <div class="converter-form">
                    <input type="number" id="amount-input" placeholder="–°—É–º–º–∞" value="1" step="0.01">
                    
                    <select id="from-currency">
                        <option value="USD">USD - –î–æ–ª–ª–∞—Ä</option>
                        <option value="EUR">EUR - –ï–≤—Ä–æ</option>
                        <option value="RUB">RUB - –†—É–±–ª—å</option>
                        <option value="GBP">GBP - –§—É–Ω—Ç</option>
                        <option value="JPY">JPY - –ò–µ–Ω–∞</option>
                        <option value="CNY">CNY - –Æ–∞–Ω—å</option>
                    </select>
                    
                    <span>‚Üí</span>
                    
                    <select id="to-currency">
                        <option value="RUB">RUB - –†—É–±–ª—å</option>
                        <option value="USD">USD - –î–æ–ª–ª–∞—Ä</option>
                        <option value="EUR">EUR - –ï–≤—Ä–æ</option>
                        <option value="GBP">GBP - –§—É–Ω—Ç</option>
                        <option value="JPY">JPY - –ò–µ–Ω–∞</option>
                        <option value="CNY">CNY - –Æ–∞–Ω—å</option>
                    </select>
                    
                    <button onclick="convertCurrency()" class="convert-btn">üîÑ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
                <div id="conversion-result" class="result"></div>
            </div>
        </div>

        <!-- –ó–∞–º–µ—Ç–∫–∏ -->
        <div id="notes-section" class="section hidden">
            <div class="section-header">
                <button class="back-button" onclick="showMainMenu()">‚óÄ –ù–∞–∑–∞–¥</button>
                <h2>üìù –ó–∞–º–µ—Ç–∫–∏</h2>
            </div>

            <div class="note-form">
                <input type="text" id="note-title" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–º–µ—Ç–∫–∏">
                <textarea id="note-content" placeholder="–¢–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏..."></textarea>
                <button onclick="addNote()" class="add-note-btn">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
            </div>

            <div id="notes-list" class="notes-container"></div>
        </div>

        <!-- –¢–∞–π–º–µ—Ä -->
        <div id="timer-section" class="section hidden">
            <div class="section-header">
                <button class="back-button" onclick="showMainMenu()">‚óÄ –ù–∞–∑–∞–¥</button>
                <h2>‚è∞ –¢–∞–π–º–µ—Ä</h2>
            </div>

            <div class="timer-controls">
                <input type="number" id="timer-minutes" placeholder="–ú–∏–Ω—É—Ç—ã" min="1" max="240">
                <button onclick="startTimer()" class="timer-btn">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
                <button onclick="pauseTimer()" class="timer-btn">‚è∏Ô∏è –ü–∞—É–∑–∞</button>
                <button onclick="resetTimer()" class="timer-btn">‚èπÔ∏è –°–±—Ä–æ—Å</button>
            </div>
            
            <div id="timer-display" class="timer-display"></div>
        </div>

        <!-- –ß–∞—Ç —Å –ò–ò -->
        <div id="chat-section" class="section hidden">
            <div class="section-header">
                <button class="back-button" onclick="showMainMenu()">‚óÄ –ù–∞–∑–∞–¥</button>
                <h2>üí¨ –ß–∞—Ç —Å –ò–ò</h2>
            </div>

            <div id="chat-messages" class="chat-messages"></div>
            
            <div class="chat-input-group">
                <input type="text" id="message-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." onkeypress="handleKeyPress(event)">
                <button onclick="sendMessage()" class="send-btn">‚û§</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
