<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FvW_AI Assistant</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjs@11.8.0/lib/browser/math.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/plotly.js-dist@2.24.1/plotly.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üî∑ FvW_AI</h1>
        </header>

        <div id="main-menu" class="section">
            <div class="main-menu">
                <button onclick="showSection('math')">üßÆ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</button>
                <button onclick="showSection('currency')">üí± –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç</button>
                <button onclick="showSection('notes')">üìù –ó–∞–º–µ—Ç–∫–∏</button>
                <button onclick="showSection('timer')">‚è∞ –¢–∞–π–º–µ—Ä</button>
                <button onclick="showSection('chat')">üí¨ –ß–∞—Ç —Å –ò–ò</button>
            </div>
        </div>

        <div id="math-section" class="section hidden">
            <div class="section-header">
                <button class="back-button" onclick="showMainMenu()">‚óÄ –ù–∞–∑–∞–¥</button>
                <h2>üßÆ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</h2>
            </div>
            
            <div class="math-tabs">
                <button class="tab-btn active" onclick="switchMathTab('calculator')">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</button>
                <button class="tab-btn" onclick="switchMathTab('equation')">–£—Ä–∞–≤–Ω–µ–Ω–∏—è</button>
                <button class="tab-btn" onclick="switchMathTab('graph')">–ì—Ä–∞—Ñ–∏–∫–∏</button>
            </div>

            <div id="calculator-tab" class="math-tab-content">
                <div class="calculator-grid">
                    <input type="text" id="calc-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ" readonly>
                    <div class="calc-buttons">
                        <button onclick="addToCalc('7')">7</button>
                        <button onclick="addToCalc('8')">8</button>
                        <button onclick="addToCalc('9')">9</button>
                        <button onclick="addToCalc('/')">/</button>
                        
                        <button onclick="addToCalc('4')">4</button>
                        <button onclick="addToCalc('5')">5</button>
                        <button onclick="addToCalc('6')">6</button>
                        <button onclick="addToCalc('*')">√ó</button>
                        
                        <button onclick="addToCalc('1')">1</button>
                        <button onclick="addToCalc('2')">2</button>
                        <button onclick="addToCalc('3')">3</button>
                        <button onclick="addToCalc('-')">-</button>
                        
                        <button onclick="addToCalc('0')">0</button>
                        <button onclick="addToCalc('.')">.</button>
                        <button onclick="calculate()">=</button>
                        <button onclick="addToCalc('+')">+</button>
                        
                        <button onclick="addToCalc('(')">(</button>
                        <button onclick="addToCalc(')')">)</button>
                        <button onclick="addToCalc('^')">^</button>
                        <button onclick="clearCalc()">C</button>
                    </div>
                </div>
                <div id="calc-result" class="result"></div>
            </div>

            <div id="equation-tab" class="math-tab-content hidden">
                <input type="text" id="equation-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: x^2 - 4 = 0)">
                <button onclick="solveEquation()">–†–µ—à–∏—Ç—å —É—Ä–∞–≤–Ω–µ–Ω–∏–µ</button>
                <div id="equation-steps" class="result"></div>
                <div id="equation-result" class="result"></div>
            </div>

            <div id="graph-tab" class="math-tab-content hidden">
                <input type="text" id="function-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä: sin(x))">
                <button onclick="plotFunction()">–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫</button>
                <div id="graph-container" style="width:100%; height:300px;"></div>
            </div>
        </div>

        <div id="currency-section" class="section hidden">
            <div class="section-header">
                <button class="back-button" onclick="showMainMenu()">‚óÄ –ù–∞–∑–∞–¥</button>
                <h2>üí± –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç</h2>
            </div>
            <div class="currency-controls">
                <button onclick="getCBRrates()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –∫—É—Ä—Å—ã</button>
            </div>
            <div id="currency-result" class="result"></div>
        </div>

        <div id="notes-section" class="section hidden">
            <div class="section-header">
                <button class="back-button" onclick="showMainMenu()">‚óÄ –ù–∞–∑–∞–¥</button>
                <h2>üìù –ó–∞–º–µ—Ç–∫–∏</h2>
            </div>
            <input type="text" id="note-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–º–µ—Ç–∫—É...">
            <button onclick="addNote()">–î–æ–±–∞–≤–∏—Ç—å</button>
            <div id="notes-list" class="result"></div>
        </div>

        <div id="timer-section" class="section hidden">
            <div class="section-header">
                <button class="back-button" onclick="showMainMenu()">‚óÄ –ù–∞–∑–∞–¥</button>
                <h2>‚è∞ –¢–∞–π–º–µ—Ä</h2>
            </div>
            <input type="number" id="timer-minutes" placeholder="–ú–∏–Ω—É—Ç—ã" min="1" max="240">
            <div class="timer-controls">
                <button onclick="startTimer()">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
                <button onclick="pauseTimer()">‚è∏Ô∏è –ü–∞—É–∑–∞</button>
                <button onclick="resetTimer()">‚èπÔ∏è –°–±—Ä–æ—Å</button>
            </div>
            <div id="timer-display" class="result"></div>
            <div id="timer-history"></div>
        </div>

        <div id="chat-section" class="section hidden">
            <div class="section-header">
                <button class="back-button" onclick="showMainMenu()">‚óÄ –ù–∞–∑–∞–¥</button>
                <h2>üí¨ –ß–∞—Ç —Å DeepSeek AI</h2>
            </div>
            <div id="chat-messages"></div>
            <div class="input-group">
                <input type="text" id="message-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." onkeypress="handleKeyPress(event)">
                <button onclick="sendMessage()">‚û§</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
